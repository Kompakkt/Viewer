@if (processing.settings$ | async; as settings) {
<k-details [title]="'Information & Helpers' | translate">
  <k-button (click)="resetVisualUIMeshSettingsHelper()" type="outlined---color-grey-4">
    {{ 'Reset Helper' | translate }}
  </k-button>
  @if (meshes$ | async; as meshes) {
  <h5>{{ 'Number of meshes:' | translate }} {{ meshes.length }}</h5>
  }

  <k-labelled-checkbox
    [label]="'Bounding Box Entity' | translate"
    (checkedChange)="toggleBoundingBoxEntityVisibility()"
  />

  <k-labelled-checkbox
    [label]="'Bounding Box Meshes' | translate"
    (checkedChange)="toggleBoundingBoxMeshesVisibility()"
  />

  <k-details [title]="'Background' | translate">
    <color-chrome (onChange)="setBackgroundColor($event.color.rgb)"></color-chrome>
  </k-details>

  <k-labelled-checkbox
    [label]="'World Axis' | translate"
    (checkedChange)="worldAxisVisibility = !worldAxisVisibility; toggleAxesVisibility('worldAxis')"
  />

  @if (worldAxisVisibility) {
  <h6>{{ 'Size' | translate }}</h6>
  <k-slider
    [min]="0.1"
    [max]="3"
    [startingValue]="worldAxisScalingFactor"
    (valueChanged)="setScalingFactorAxis($event, true)"
  />
  }

  <k-labelled-checkbox
    [label]="'Local Axis' | translate"
    (checkedChange)="localAxisVisibility = !localAxisVisibility; toggleAxesVisibility('localAxis')"
  />

  @if (localAxisVisibility) {
  <h6>{{ 'Size' | translate }}</h6>
  <k-slider
    [min]="0.1"
    [max]="3"
    [startingValue]="localAxisScalingFactor"
    (valueChanged)="setScalingFactorAxis($event, false)"
  />
  }

  <k-labelled-checkbox
    [label]="'Ground' | translate"
    (checkedChange)="groundVisibility = !groundVisibility; toggleGroundVisibility()"
  />

  @if (groundVisibility) {
  <h6>{{ 'Size' | translate }}</h6>
  <k-slider
    [min]="0"
    [max]="10"
    [startingValue]="groundScalingFactor"
    (valueChanged)="setScalingFactorGround($event)"
  />

  <h6>{{ 'Color' | translate }}</h6>
  <color-chrome (onChange)="entitySettings.setGroundMaterial($event.color.rgb)"></color-chrome>
  }

  <k-button (click)="resetVisualUIMeshSettingsHelper()" type="outlined---color-grey-4">
    {{ 'Reset Helper' | translate }}
  </k-button>
</k-details>

<k-details [title]="'Scale' | translate">
  <k-button (click)="handleChangeDimension('scale', 1)" type="outlined---color-grey-4">
    {{ 'Reset Size' | translate }}
  </k-button>

  <k-input
    [label]="'Height:' | translate"
    [min]="0"
    [max]="entitySettings.initialSize.y * 5"
    [startingValue]="entitySettings.initialSize.y"
    type="number"
    (valueChanged)="processing.entityHeight = $event.value; handleChangeDimension('height')"
    suffix="cm"
  />
  <k-input
    [label]="'Width:' | translate"
    [min]="0"
    [max]="entitySettings.initialSize.x * 5"
    [startingValue]="entitySettings.initialSize.x"
    type="number"
    (valueChanged)="processing.entityWidth = $event.value; handleChangeDimension('width')"
    suffix="cm"
  />
  <k-input
    [label]="'Depth:' | translate"
    [min]="0"
    [max]="entitySettings.initialSize.z * 5"
    [startingValue]="entitySettings.initialSize.z"
    type="number"
    (valueChanged)="processing.entityDepth = $event.value; handleChangeDimension('depth')"
    suffix="cm"
  />

  <p>{{ 'Scale factor:' | translate }} {{ settings.localSettings.scale }}</p>

  <k-slider
    [min]="1"
    [max]="5"
    [startingValue]="settings.localSettings.scale || 1"
    (valueChanged)="handleChangeDimension('scale', $event)"
  />
</k-details>

<k-details [title]="'Orientation' | translate">
  <k-button (click)="setRotation('xyz_reset', 0)" type="outlined---color-grey-4">
    {{ 'Reset Rotation' | translate }}
  </k-button>
  <h5>X</h5>
  <k-slider
    [min]="0"
    [max]="359"
    [startingValue]="settings.localSettings.rotation.x"
    (valueChanged)="setRotation('x', $event)"
  />

  <h5>Y</h5>
  <k-slider
    [min]="0"
    [max]="359"
    [startingValue]="settings.localSettings.rotation.y"
    (valueChanged)="setRotation('y', $event)"
  />

  <h5>Z</h5>
  <k-slider
    [min]="0"
    [max]="359"
    [startingValue]="settings.localSettings.rotation.z"
    (valueChanged)="setRotation('z', $event)"
  />
</k-details>

}
